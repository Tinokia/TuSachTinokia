<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Phật - Bồ Tát - La Hán</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #6b4226;
    }
    .controls {
      text-align: center;
      margin: 20px 0;
    }
    input, select {
      padding: 8px;
      margin: 5px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .count {
      text-align: center;
      margin: 10px;
      font-weight: bold;
      color: #333;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 20px;
      margin-top: 20px;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      padding: 15px;
      text-align: center;
      cursor: pointer;
      transition: background 0.2s;
    }
    .card:hover {
      background: #f1e4d3;
    }
    .card h2, .card h3 {
    margin: 0;
    font-size: 16px;               /* chữ nhỏ gọn */
    color: #333;
  }
    .pagination {
      text-align: center;
      margin: 20px 0;
    }
    .pagination button {
      padding: 8px 12px;
      margin: 0 5px;
      border: none;
      border-radius: 6px;
      background: #6b4226;
      color: #fff;
      cursor: pointer;
    }
    .pagination button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    /* Popup */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      max-width: 500px;
      width: 90%;
      text-align: center;
      position: relative;
    }
    .modal-content img {
      width: 100%;
      max-height: 300px;
      object-fit: contain;
      border-radius: 8px;
      margin-bottom: 10px;
    }
    .modal-content h2 {
      margin: 10px 0;
    }
    .modal-content p {
      margin: 8px 0;
    }
    .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 20px;
      cursor: pointer;
      color: #555;
    }
	.modal-content {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  max-width: 700px;
  width: 90%;
  text-align: left;
  position: relative;
}

.detail-body {
  display: flex;
  gap: 20px;
  align-items: flex-start;
}

.detail-img {
  flex: 1;
}


.detail-text {
  flex: 2;
}

  </style>
</head>
<body>
  <h1>Danh Sách Các Vị Từ Phật Trở Xuống</h1>
  <!-- Thanh điều khiển -->
  <div class="controls">
	  <a href="../index.html"><button class="realm-btn active">Tủ sách</button></a>
    <input type="text" id="searchBox" placeholder="Tìm kiếm theo tên...">
    <select id="filterType">
      <option value="all">Tất cả</option>
      <option value="phat">Phật</option>
      <option value="botat">Bồ Tát</option>
      <option value="lahan">La Hán</option>
    </select>
  </div>

  <!-- Hiển thị số lượng -->
  <div class="count" id="countDisplay">Có 0 vị</div>
  
  <!-- Danh sách -->
  <div class="grid" id="cardsContainer"></div>

  <!-- Phân trang -->
  <div class="pagination">
    <button id="prevBtn">← Trước</button>
    <span id="pageInfo"></span>
    <button id="nextBtn">Sau →</button>
  </div>

  <!-- Popup chi tiết -->
<div class="modal" id="detailModal">
  <div class="modal-content">
    <span class="close-btn" id="closeModal">&times;</span>
    <div class="detail-body">
      <div class="detail-img">
        <img id="detailImg" src="" alt="">
      </div>
      <div class="detail-text">
        <h2 id="detailName"></h2>
        <p id="detailDesc"></p>
        <p><b>Tên cõi / Phật Quốc / Nước:</b> <span id="detailPractice"></span></p>
		<p><b>Kinh điển ghi chép:</b> <span id="detailghichep"></span></p>
		<p><b>Câu niệm:</b> <span id="detailChant"></span></p>
		<p><b>Ngày vía / Tên Thật:</b> <span id="detailVigilDay"></span></p>
      </div>
    </div>
  </div>
</div>

<script language="javascript" src="phat/dsphat.js"></script>
  <script>
    const container = document.getElementById("cardsContainer");
    const searchBox = document.getElementById("searchBox");
    const filterType = document.getElementById("filterType");
    const countDisplay = document.getElementById("countDisplay");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    const pageInfo = document.getElementById("pageInfo");

    const detailModal = document.getElementById("detailModal");
    const closeModal = document.getElementById("closeModal");
    const detailImg = document.getElementById("detailImg");
    const detailName = document.getElementById("detailName");
    const detailDesc = document.getElementById("detailDesc");
    const detailPractice = document.getElementById("detailPractice");
	const detailghichep = document.getElementById("detailghichep");
	const detailChant = document.getElementById("detailChant");
	const detailVigilDay = document.getElementById("detailVigilDay");

    let currentPage = 1;
    const perPage = 25;
    let filteredData = [];

    function renderCards() {
      const keyword = searchBox.value.toLowerCase();
      const type = filterType.value;

      filteredData = data.filter(item => 
        (type === "all" || item.type === type) &&
        item.name.toLowerCase().includes(keyword)
      );

      const total = filteredData.length;
      const totalPages = Math.ceil(total / perPage);
      if (currentPage > totalPages) currentPage = totalPages || 1;

      const start = (currentPage - 1) * perPage;
      const end = start + perPage;
      const pageData = filteredData.slice(start, end);

      container.innerHTML = "";
      pageData.forEach(item => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `<h2>${item.name}</h2>`;
        card.addEventListener("click", () => openDetail(item));
        container.appendChild(card);
      });

      // Cập nhật số lượng
      countDisplay.textContent = `Có ${total} vị`;

      // Cập nhật phân trang
      pageInfo.textContent = `Trang ${currentPage}/${totalPages || 1}`;
      prevBtn.disabled = currentPage === 1;
      nextBtn.disabled = currentPage === totalPages || totalPages === 0;
    }

    function openDetail(item) {
  detailImg.src = item.img;
  detailName.textContent = item.name;
  detailDesc.innerHTML = item.desc;   // đổi textContent → innerHTML
  detailPractice.textContent = item.practice;
  detailghichep.textContent = item.ghichep || "Không có";
  detailChant.textContent = item.chant || "Không có";
  detailVigilDay.textContent = item.vigilDay || "Không có";
  detailModal.style.display = "flex";
}


    closeModal.addEventListener("click", () => {
      detailModal.style.display = "none";
    });

    searchBox.addEventListener("input", () => {
      currentPage = 1;
      renderCards();
    });
    filterType.addEventListener("change", () => {
      currentPage = 1;
      renderCards();
    });

    prevBtn.addEventListener("click", () => {
      if (currentPage > 1) {
        currentPage--;
        renderCards();
      }
    });
    nextBtn.addEventListener("click", () => {
      if (currentPage * perPage < filteredData.length) {
        currentPage++;
        renderCards();
      }
    });

    // render lần đầu
    renderCards();
  </script>
</body>
</html>
